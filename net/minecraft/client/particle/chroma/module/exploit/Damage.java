package net.minecraft.client.particle.chroma.module.exploit;

import java.util.ArrayList;

import net.minecraft.client.particle.chroma.module.Category;
import net.minecraft.client.particle.chroma.module.Module;
import net.minecraft.client.particle.chroma.settings.Setting;
import net.minecraft.network.play.client.C03PacketPlayer;

public class Damage extends Module
{
	public Damage()
	{
		super("Damage", 115, Category.EXPLOIT);
	}
	
	@Override
	public void setup()
	{
		ArrayList<String> modes = new ArrayList<String>();
		modes.add("NCP");
		modes.add("AAC");
		this.getSetManager().rSetting(new Setting(295, "Mode", "", this, "NCP", modes));
		this.getSetManager().rSetting(new Setting(296, "Damage", "", this, 1.0, 1.0, 20.0, true));
		super.setup();
	}
	
	@Override
	public void onEnable()
	{
		doDamage(this.getSetManager().getSettingById(296).getValueI());
		this.setToggled(false);
		super.onEnable();
	}
	
	public static void doDamage(int damage)
	{
		String mode = mc.getChroma().getSetManager().getSettingById(295).getValString();
		
		if (mode.equals("NCP"))
		{
			double x = mc.thePlayer.posX;
			double y = mc.thePlayer.posZ;
			double z = mc.thePlayer.posZ;
			
			for (int i = 0; i < 65 * damage; i++)
			{
				mc.thePlayer.sendQueue.addToSendQueue(new C03PacketPlayer.C04PacketPlayerPosition(x, y + 0.049, z, false));
				mc.thePlayer.sendQueue.addToSendQueue(new C03PacketPlayer.C04PacketPlayerPosition(x, y, z, false));
			}
			
			mc.thePlayer.sendQueue.addToSendQueue(new C03PacketPlayer.C04PacketPlayerPosition(x, y, z, true));
		}
		else
		{
			mc.thePlayer.motionY = 5 * damage;
		}
	}
}